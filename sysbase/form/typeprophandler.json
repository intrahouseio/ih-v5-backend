{
  "grid": [
    { "id": "p1", "xs": 12, "class": "main", "table": "typepropsTable", "hide": "data.p1.fuse" },
    { "id": "p2", "xs": 12, "class": "main", "table": "typepropsTable", "hide": "!data.p1.fuse" },
    {
      "id": "p9",
      "xs": 12,
      "class": "main",
      "table": "typepropsTable",
      "height": "fill",
      "padding": 4,
      "hide": "!data.p1.fuse"
    }
  ],
  "spacing": 10,

  "p1": [
    { "prop": "id", "title": "Свойство", "type": "text", "hide": "true" },
    { "prop": "op", "title": "Тип свойства", "type": "text", "hide": "true" },
    { "prop": "fuse", "title": "Обработчик", "type": "text", "hide": "true" },
    { "prop": "fuse_name", "title": "Обработчик", "type": "text" }
  ],

  "p2": [
    { "prop": "header_start", "title": "Запуск", "type": "header" },
    { "prop": "when_str", "title": "", "type": "text", "hide": "data.p1.id == 'MAIN'" },
    {
      "prop": "main_when",
      "title": "",
      "type": "droplist",
      "hide": "data.p1.id != 'MAIN'",
      "data": [
        { "id": "onchange", "title": "При изменении свойств" },
        { "id": "interval", "title": "Циклически" },
        { "id": "schedule", "title": "По расписанию" }
      ]
    },
  
    {
      "prop": "main_when_onchange",
      "title": "Свойства (если не выбраны - при изменении любого свойства)",
      "type": "input",
      "hide": "data.p1.id != 'MAIN' || data.p2.main_when.id != 'onchange'"
    },

    {
      "prop": "main_when_interval",
      "title": "С интервалом (сек)",
      "type": "input",
      "hide": "data.p1.id != 'MAIN' || data.p2.main_when.id != 'interval'"
    },

    {
      "prop": "main_when_schedule",
      "title": "",
      "type": "droplist",
      "hide": "data.p1.id != 'MAIN' || data.p2.main_when.id != 'schedule'",
   
      "data": [
        { "id": "@hourly", "title": "На границе часа" },
        { "id": "@daily", "title": "На границе дня" },
        { "id": "@monthly", "title": "На границе месяца" },
        { "id": "@sunrise", "title": "На рассвете" },
        { "id": "@sunset", "title": "На закате" },
        { "id": "cron", "title": "По правилу cron" }
      ]
    },
    {
      "prop": "main_when_ischedule_cron",
      "title": "Правило cron (* * * * *)",
      "type": "input",
      "hide": "data.p1.id != 'MAIN' || data.p2.main_when.id != 'schedule' || data.p2.main_when_schedule.id != 'cron'"
      
    },
    { "prop": "fuse_name", "title": "Обработчик", "type": "text", "hide": "data.p1.id == 'MAIN'" }
  ],

  "p9": [
    { "prop": "errstr", "title": "", "type": "text", "hide": "!data.p9.errstr" },
    { "prop": "handler", "title": "Функция-обработчик", "type": "script", "disabled": false, "hide": "!data.p1.fuse" }
  ]
}
