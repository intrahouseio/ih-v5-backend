## Структура и архитектура системы v5

Система состоит из сервисов, объединенных компонентом holder (паттерн Посетитель)

**holder** - это EventEmitter без своего функционала (в отличие от houser v3, v4)

Сервисы используют holder  для: 
 - генерации сообщений другим сервисам (emit)
 - получения сообщений (on)
 - доступа к структурам *Set друг друга (предпочтительно только чтение), которые миксинятся однажды на старте каждого сервиса

Сервисы ничего не знают друг о друге. Для доступа к общим данным имеются специальные модули.
Такая архитектура позволяет добавлять функционал, добавив 

На текущий момент в системе имеются сервисы прикладного уровня:
 - deviceserver
 - pluginserver
 - sceneserver
 - trenserver
 - logserver

Сервисы, обеспечивающие связь:
 - webserver
 - udpserver 

## Модули доступа к данным для всех сервисов

 - datamanager - доступ к настройкам проекта и системным  настройкам. 
   Хранилище данных из коробки **nedb**, замена модуля dbstore должна позволить перейти на **mongodb**

 - hdbconnector - доступ к историческим данным
   Заменой коннектора нужно обеспечить подключение разных СУБД 

 - доступ к оперативным данным через holder.

## Сервисы 
 Каждый сервис прикладного уровня состоит из engine и mate.

  - **mate** - загружает данные через  datamanager. Слушает изменения настроек и вызывает ф-и engine
    
  - **engine** - формирует множество объектов *Set (devSet, sceneSet, unitSet, ..)


 ### deviceserver

  



  
